{% extends "base.html" %}

{% block title %}Practice Coding - Tech Prep Hub{% endblock %}

{% block content %}
<div class="content-card animate-fade-in-up">
    <h2 class="content-section-header text-primary-blue">Top Service-Based Company Coding Questions</h2>
    <p class="text-xl text-light-text mb-10">
        Practice these coding problems to enhance your problem-solving abilities.
        Click <strong>"Show Solution"</strong> to reveal the code and explanation!
    </p>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for problem in problems %}
        <div class="bg-light-bg p-8 rounded-xl shadow-md border border-gray-200 hover:shadow-xl transition duration-300 ease-in-out flex flex-col justify-between">
            <div>
                <h3 class="text-2xl font-bold text-dark-text mb-3">{{ loop.index }}. {{ problem.title }}</h3>
                <p class="text-light-text text-base italic mb-4">Company: {{ problem.company }}</p>
            </div>
            <div class="flex items-center justify-between mt-auto mb-4">
                {% set difficulty_class = {
                    'Easy': 'bg-secondary-green',
                    'Medium': 'bg-accent-purple',
                    'Hard': 'bg-red-600'
                }[problem.difficulty] %}
                <span class="difficulty text-white px-4 py-1 rounded-full text-sm font-bold {{ difficulty_class }}">
                    {{ problem.difficulty }}
                </span>
                <a href="{{ problem.link }}" target="_blank" class="text-primary-blue-dark hover:text-primary-blue font-semibold flex items-center text-md">
                    Solve Externally
                    <svg class="w-4 h-4 ml-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                    </svg>
                </a>
            </div>

            <!-- âœ… Improved Show Solution Button Visibility -->
            <button class="solution-toggle w-full text-white font-semibold py-2 px-4 mt-4 rounded-lg bg-primary-blue hover:bg-primary-blue-dark transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-blue-dark">
                Show Solution
                <svg class="w-5 h-5 ml-2 transform transition-transform duration-300 solution-icon" fill="none"
                     stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>

            <!-- Solution Content -->
            <div class="solution-content hidden mt-6 pt-6 border-t border-gray-300">
                <h4 class="text-xl font-bold text-dark-text mb-3">Solution Explanation:</h4>
                <p class="text-light-text leading-relaxed mb-6">{{ problem.solution_explanation }}</p>

                <h4 class="text-xl font-bold text-dark-text mb-3">Solution Code:</h4>
                <pre class="bg-gray-900 text-gray-50 p-6 rounded-lg overflow-x-auto text-sm shadow-inner font-mono leading-relaxed mb-6">
<code>{{ problem.solution_code | e }}</code></pre>

                {% if problem.solution_output %}
                <h4 class="text-xl font-bold text-dark-text mb-3">Expected Output:</h4>
                <pre class="bg-green-50 text-green-800 p-6 rounded-lg overflow-x-auto text-sm border border-green-200 shadow-inner font-mono leading-relaxed">
<code>{{ problem.solution_output | e }}</code></pre>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    <p class="text-center text-light-text text-sm mt-16">More problems and solutions will be added regularly!</p>
</div>
{% endblock %}
